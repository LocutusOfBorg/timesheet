# TODO: fix the ambiguity of project manager that can't select only project.responsible or only project.employees._id 

restrictions:
  user:
    criteria_restrictions:
      employee:
        _id: '%%_id%%'
        username: '%%username%%'
    projection_restrictions:
      employee:
        user: true
        password: true
      administrator:
        user: true
        password: true
    action_restrictions:
      employee:
        remove: true
        add: true

  day:
    criteria_restrictions:
      employee:
        users.user_id: '%%_id%%'
      project manager:
         $or:
           - users.user_id: '%%_id%%'
           - hours.project:
                 $in: '%%managed_projects%%'

  project:
    criteria_restrictions:
      employee:
        employees._id:
            $elemMatch:
              _id: '%%_id%%'
              
      project manager:
        $or:
          - responsible._id: '%%_id%%'
          - employees._id:
              $elemMatch:
                _id: '%%_id%%'  
    
    action_restrictions:
      employee:
        remove: true
        add: true


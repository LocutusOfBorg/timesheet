
user:   
    criteria_restrictions_schema:
      employee:
        type: object
        properties:
          _id:
            type: string
            pattern: '^%%_id%%$'
        required: 
          - _id
        
    projection_restrictions:
      employee:
        - salt
        - password
      administrator:
        - salt
        - password
      project manager:
        - salt
        - password
        
    action_restrictions:
      employee:
        - remove
        - add

day:
    criteria_restrictions_schema:
      employee:
        type: object
        properties:
          users.user_id: 
            type: string
            pattern: '^%%_id%%$'
        required: 
          - users.user_id                
    
    criteria_restrictions:
      employee:
        users.user_id: '^%%_id%%$'
      project manager:
         $or:
           - users.user_id: '^%%_id%%$'
           - hours.project:
                 $in: '%%managed_projects%%'

project:
    criteria_restrictions_schema:
      employee:
        type: object
        properties:
          employees._id: 
            type: string
            pattern: '^%%_id%%$'
        required:
          - employees._id
              
      project manager:
        oneOf:
          - type: object
            required: [ employees._id ]
            properties:
              employees._id:
                type: string
                pattern: '^%%_id%%$'
          - type: object
            required: [ responsible._id ]
            properties:
              responsible._id:
                type: string
                pattern: '^%%_id%%$'
    
    action_restrictions:
      employee:
        - remove
        - add


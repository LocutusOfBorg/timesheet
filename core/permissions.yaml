
customer:
    action_restrictions:
      employee:
        - remove
        - add
        - update
      project manager:
        - remove
        - add
        - update

user:   
    criteria_restrictions_schema:
      employee:
        type: object
        properties:
          _id:
            type: string
            pattern: '%%_id%%'
        required: 
          - _id
        
    projection_restrictions:
      employee:
        - salt
        - password
      administrator:
        - salt
        - password
      project manager:
        - salt
        - password
        
    action_restrictions:
      employee:
        - remove
        - add
      project manager:
        - remove
        - add

day:

    # Only administrator can call /*/day directly
    action_restrictions:
      employee:
        - get
        - remove
        - add
        - update
      project manager:
        - get
        - remove
        - add
        - update

    criteria_restrictions_schema:
      employee:
        type: object
        properties:
          users.user_id: 
            type: string
            pattern: '%%_id%%'
        required: 
          - users.user_id                
      project manager:
        type: object
        properties:
          users.user_id: 
            type: string
            pattern: '%%_id%%'
            
    insert_restrictions_schema:
      employee:
        type: object
        properties:
          users:
            optional: True
            type: array
            items:
              properties:
                user_id:
                  type: string
                  pattern: '%%_id%%'
      project manager:
        type: object
        properties:
          date:
            type: string
          users:
            optional: True
            type: array
            items:
              properties:
                user_id:
                  type: string
                  pattern: '%%_id%%'
                hours:
                  optional: True
                  type: array
                  items: 
                    properties:
                      project:
                        enum : '%%managed_projects%%'
                  
project:
    criteria_restrictions_schema:
      employee:
        type: object
        properties:
          employees._id: 
            type: string
            pattern: '%%_id%%'
        required:
          - employees._id
              
      project manager:
        oneOf:
          - type: object
            required: [ employees._id ]
            properties:
              employees._id:
                type: string
                pattern: '%%_id%%'
          - type: object
            required: [ responsible._id ]
            properties:
              responsible._id:
                type: string
                pattern: '%%_id%%'
    
    action_restrictions:
      employee:
        - remove
        - add

